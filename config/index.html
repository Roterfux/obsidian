<!DOCTYPE html>
<html>
  <head>
  <title>Obsidian Configuration</title>
  <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  <script src='js/slate.js'></script>
  <style>
  .title {
    padding-top: 20px;
    text-align: center;
  }
  </style>
  </head>

  <body>
    <h1 class='title'>Obsidian Configuration</h1>

    <div class='item-container'>
      <div class='item-container-header'>Appearance</div>

      <div class='item-container-content'>
        <label class='item'>
          Outer Background Color
          <input id='CONFIG_COLOR_OUTER_BACKGROUND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Inner Background Color
          <input id='CONFIG_COLOR_INNER_BACKGROUND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Minute Hand Color
          <input id='CONFIG_COLOR_MINUTE_HAND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Minute Hand Inner Color
          <input id='CONFIG_COLOR_INNER_MINUTE_HAND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Hour Hand Color
          <input id='CONFIG_COLOR_HOUR_HAND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Hour Hand Inner Color
          <input id='CONFIG_COLOR_INNER_HOUR_HAND' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Circle Color
          <input id='CONFIG_COLOR_CIRCLE' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Tick Color
          <input id='CONFIG_COLOR_TICKS' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Day of the Week Color
          <input id='CONFIG_COLOR_DAY_OF_WEEK' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Date Color
          <input id='CONFIG_COLOR_DATE' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

    </div>

    <div class='item-container'>
      <div class='item-container-header'>Battery</div>

      <div class="item-container-content">
        <label class="item">
          Battery Icon
          <select id='CONFIG_BATTERY_LOGO' dir='rtl' class="item-select">
            <option class="item-select-option">Always</option>
            <option class="item-select-option">When low (30% or below)</option>
            <option class="item-select-option">Never</option>
          </select>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Battery Icon Color
          <input id='CONFIG_COLOR_BATTERY_LOGO' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
           Low Battery (30%) Color
          <input id='CONFIG_COLOR_BATTERY_30' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Low Battery (20%) Color
          <input id='CONFIG_COLOR_BATTERY_20' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Low Battery (10%) Color
          <input id='CONFIG_COLOR_BATTERY_10' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

    </div>

    <div class='item-container'>
      <div class='item-container-header'>Bluetooth</div>
      
      <div class='item-container-content'>
        <label class='item'>
          Show Bluetooth Logo When Disconnected
          <input id='CONFIG_BLUETOOTH_LOGO' type='checkbox' class='item-toggle'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Vibrate on Disconnect
          <input id='CONFIG_VIBRATE_DISCONNECT' type='checkbox' class='item-toggle'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Vibrate on Re-connect
          <input id='CONFIG_VIBRATE_RECONNECT' type='checkbox' class='item-toggle'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Message on Disconnect (5 seconds)
          <input id='CONFIG_MESSAGE_DISCONNECT' type='checkbox' class='item-toggle'>
        </label>
      </div>

      <div class='item-container-content'>
        <label class='item'>
          Message on Re-connect (5 seconds)
          <input id='CONFIG_MESSAGE_RECONNECT' type='checkbox' class='item-toggle'>
        </label>
      </div>
      
      <div class='item-container-content'>
        <label class='item'>
          Bluetooth Icon Color
          <input id='CONFIG_COLOR_BLUETOOTH_LOGO' type='text' class='item-color item-color-normal' value='#000000'>
        </label>
      </div>

    </div>

    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SUBMIT'>
      </div>
    </div>
  <script>
  function getConfigData() {
    var options = {
      'CONFIG_TEST': 5,
    };

    console.log('Read options from DOM: ' + JSON.stringify(options));
    return options;
  }

  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }
 
  // get default values from the url
  $(document).ready(function() {
    // var color = getParameterByName("color") || "green";
    // if (color) {
    //   $('#color_' + color).prop("checked", true);
    // }

    // submit button event listener
    var submitButton = document.getElementById('submit_button');
    submitButton.addEventListener('click', function() {
      console.log('Submit');

      // Set the return URL depending on the runtime environment
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      console.log(return_to + encodeURIComponent(JSON.stringify(getConfigData())));
      //document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
    });
  });
  </script>
  </body>
</html>